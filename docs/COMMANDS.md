# Command line parameters

The following section describes the command line parameters which can be used to influence the program's behavior. In addition to these parameters, settings such as the watch area(s) are configured in the program's config file - see separate section.

    usage: mowas-pwb.py [-h]
                        [--configfile CONFIGFILE]
                        [--generate-test-message]
                        [--standard-run-interval STANDARD_RUN_INTERVAL]
                        [--emergency-run-interval EMERGENCY_RUN_INTERVAL]
                        [--ttl TIME_TO_LIVE]
                        [--follow-the-ham FOLLOW_THE_HAM]
                        [--warning-level {MODERATE,MINOR,EXTREME,SEVERE}]
                        [--high-prio-level {MODERATE,MINOR,EXTREME,SEVERE}]
                        [--email-recipient EMAIL_RECIPIENT] 
                        [--enable-covid-content]
                        [--translate-to TARGET_LANGUAGE]
                        [--localfile LOCAL_FILE_NAME]
                        [--generic-full-msg-config-file CONFIG_FILE_NAME]
                        [--generic-short-msg-config-file CONFIG_FILE_NAME]

## Optional command line parameters

| Parameter                        | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
|----------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| ``configfile``                   | Specifies the program's config file name. Default is ``mowas-pwb.cfg``  (note: the config file itself is mandatory to have, though)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| ``sms-message-length``           | maximum length of a (single) message that is sent to the SMS messenger config file. Minimum value is 67 (APRS msg len)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | 
| ``sms-message-split``            | Simple switch; if set, ``mowas-pwb`` will generate 1..n SMS messages of ``--sms-message-length`` size. If not used, ONE message will get created and any additional text will get truncated.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | 
| ``standard-run-interval``        | This is the program's standard run interval in minutes; its minimum setting (and default value) is ``60``. Between each check of the MOWAS URLs, the program will sleep the specified number of minutes __unless__ at least one change has been detected which was sent to the user and the program will automatically switch to a different run interval. See ``emergency-run-interval`` for additional information.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | 
| ``emergency-run-interval``       | This is the standard run interval in minutes in case at least one __new__ or __updated__ emergency message has been detected (read: something has happened and we had to alert the user with a message). This parameter's minimum setting and default value is 15 (minutes) and its value is enforced to be lower than the one for `standard-run-interval`.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| ``ttl``                          | This numeric value defines the time-to-live for the program's decaying memory dictionary in hours. Default is ``8`` (hours); once a message has been present in the program's decaying memory cache for __ttl__ hours, it will be resent to the user. See the separate chapter on how the TTL logic works.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| ``follow-the-ham``               | This will _not_ provide you with the directions to the nearest restaurant :meat_on_bone: but enables you to track one APRS call sign's position. In addition to the program's default set of (static) coordinates which are monitored by default, this option will look up the user's call sign on aprs.fi, retrieve its lat/lon coordinates and then monitor these dynamic coordinates, too. This is a useful option if you're in a disaster area along with your APRS-capable HT and need to be aware of any dangers and emergencies that might be related to your current position. __Please use this option responsibly and only when necessary__. This program option is __not__ supposed to be used on a permanent basis. Remember: with great power comes great responsibility. This program option has no default setting, meaning that unless you specify a call sign, only the static coordinates from the program's config file will be monitored. |
| ``warning-level``                | Defines the minimal warning level that a message must have before the program considers it for processing. Currently, MOWAS supports four warning levels (listed in ascending order of importance): ``MINOR`` (default setting), ``MODERATE``, ``SEVERE`` and ``EXTREME``. If your message's warning level is below the given value for the ``warning-level`` parameter, it will be ignored - even if its coordinates match with your watch coordinates.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | 
| ``high-prio-level``              | Similar to the ``warning-level`` parameter, you can specify a MOWAS warning threshold for MOWAS messages of the "Alert" and "Update" categories. If the MOWAS messages' warning level is greater or equal to ``high-pro-level``, then the outgoing message will be sent to the user with high priority (whereas supported by the Apprise messenger target). In any other case, normal priority settings will be applied. Note that MOWAS "Cancel" messages will always be sent with standard priority. Default value for this option is ``SEVERE``.                                                                                                                                                                                                                                                                                                                                                                                                           |
| ``enable-covid-content``         | By default, ``mowas-pwb`` __suppresses__ Covid related alerts. Due to the sheer number of Covid related messages issued by the German government on a daily basis, I've added this constraint which simply omits all messages containing the terms ``covid`` or ``corona``. If you still want to receive these messages, you can set this program flag.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| ``translate-to``                 | Allows users to auto-translate the MOWAS messages. This option uses [www.deepl.com](www.deepl.com) and requires that you configure a deepl.com API access key in the program's configuration file. The language code needs to be provided in ISO-639-1 format. Valid language codes: ``bg``,``cs``,``da``,``el``,``en-gb``,``en-us``,``es``,``et``,``fi``,``fr``,``hu``,``it``,``ja``,``lt``,``lv``,``nl``,``pl``,``pt-br``,``pt-pt``,``ro``,``ru``,``sk``,``sl``,``sv``,``zh``.                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| ``text-summarizer``              | Used for all SMS messages. Valid settings: ``internal`` (default), ``generic``, ``openai``, ``palm``. Both ``openai`` and ``palm`` require additional access keys in the program's config file.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| ``localfile``                    | Optional file name, used for testing purposes only. Specify a local MOWAS json file name and use it as sole data source.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |

If you have specified the ``follow-the-ham`` parameter AND aprs.fi's access key is configured,``mowas-pwb`` will initiate one request to ``aprs.fi`` during its startup process. This pre-check allows it to detect if the call sign does exist on aprs.fi and if the aprs.fi API access key is configured in a proper way. If that check is not passed successfully, the program startup will abort. Any _further_ errors in retrieving that call sign's position data during its processing cycles will _not_ cause a program error, though. ``mowas-pwb`` will simply continue to monitor the static watch areas which were specified in the program config file; the call sign's availability on aprs.fi simply might have expired.

## Mandatory command line parameters

| Parameter                       | Description                                                                                                                                                                                                                                                                                                                                                                      |
|---------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| ``messenger-config-file``       | [Apprise](https://github.com/caronc/apprise) messenger [YAML](https://github.com/caronc/apprise/wiki/config_yaml) configuration file ([text](https://github.com/caronc/apprise/wiki/config_text) config files should work, too). Messenger accounts included in this file will receive the UNBRIDGED/full message version.                                                       | 
| ``sms-messenger-config-file``   | [Apprise](https://github.com/caronc/apprise) messenger [YAML](https://github.com/caronc/apprise/wiki/config_yaml) configuration file ([text](https://github.com/caronc/apprise/wiki/config_text) config files should work, too). Messenger accounts included in this file will receive the ABRIDGED message version. Abbreviation is controlled via ``--text-summarizer`` option | 
| ``email-recipient``             | Specifies the email address of the person that will receive our program's message(s). This value has to be specified if the program is instructed to send data to an email account.                                                                                                                                                                                              |

At least __one__ of these three output options (``messenger-config-file`` _or_ ``sms-messenger-config-file`` _or_ ``email-recipient``) needs to be configured in the program's config file __and__ also provided via command line parameters - otherwise, the program will exit with an error message during startup. Keep in mind that you can disable notification options without the need for modifying the program configuration file.

An Apprise demo YAML template can be found [here](https://github.com/joergschultzelutter/mowas-pwb/blob/master/src/apprise_demo_template.yml).

Have a look at the [program's processing logic and known issues](ADDITIONAL_INFO.md)
