# Command line parameters

The following section describes the command line parameters which can be used to influence the program's behavior. In addition to these parameters, settings such as the watch area(s) are configured in the program's config file - see separate section.

    usage: mowas-pwb.py [-h] [--configfile CONFIGFILE] [--disable-dapnet] [--disable-telegram] [--disable-email] [--generate-test-message]
                        [--standard-run-interval STANDARD_RUN_INTERVAL] [--emergency-run-interval EMERGENCY_RUN_INTERVAL] [--ttl TIME_TO_LIVE]
                        [--dapnet-destination-callsign DAPNET_DESTINATION_CALLSIGN] [--telegram-destination-id TELEGRAM_DESTINATION_ID]
                        [--follow-the-ham FOLLOW_THE_HAM] [--warning-level {MODERATE,MINOR,EXTREME,SEVERE}]
                        [--dapnet-high-prio-level {MODERATE,MINOR,EXTREME,SEVERE}] [--email-recipient EMAIL_RECIPIENT] [--enable-covid-content]
                        [--translate-to TARGET_LANGUAGE]

## Optional command line parameters

- ``configfile`` Specifies the program's config file name. Default is '__mowas-pwb.cfg__'
- ``generate_test_message`` Default value is ``False``. If you set this value to ``True``, the program will start up as usual but will send only _one_ test message to the specified recipient on DAPNET, Email and/or Telegram. Once this data was sent to the respective APIs, the program will exit.
- ``disable-dapnet`` Default value is ``False``. Set this value to ``True`` if you want to disable all outgoing messages to DAPNET. Note: if you haven't configured your DAPNET access credentials, this option's value is automatically set to ``True``.
- ``disable-telegram`` Default value is ``False``. Set this value to ``True`` if you want to disable all outgoing messages to Telegram. Note: if you haven't configured your Telegram access credentials, this option's value is automatically set to ``True``.
- ``disable-email`` Default value is ``False``. Set this value to ``True`` if you want to disable all outgoing messages via Email. Note: if you haven't configured your Telegram access credentials, this option's value is automatically set to ``True``.
- ``standard-run-interval`` This is the program's standard run interval in minutes; its minimum setting (and default value) is ``60``. Between each check of the MOWAS URLs, the program will sleep the specified number of minutes __unless__ at least one change has been detected which was sent to the user and the program will automatically switch to a different run interval. See ``emergency-run-interval`` for additional information.
- ``emergency-run-interval`` This is the standard run interval in minutes in case at least one __new__ or __updated__ emergency message has been detected (read: something has happened and we had to alert the user with a message). This parameter's minimum setting and default value is 15 (minutes) and its value is enforced to be lower than the one for __standard-run-interval__. 
- ``ttl`` This numeric value defines the time-to-live for the program's decaying memory dictionary in hours. Default is ``8`` (hours); once a message has been present in the program's decaying memory cache for __ttl__ hours, it will be resent to the user. See the separate chapter on how the TTL logic works.
- ``follow-the-ham`` This will _not_ provide you with the directions to the nearest restaurant :meat_on_bone: but enables you to track one APRS call sign's position. In addition to the program's default set of (static) coordinates which are monitored by default, this option will look up the user's call sign on aprs.fi, retrieve its lat/lon coordinates and then monitor these dynamic coordinates, too. This is a useful option if you're in a disaster area along with your APRS-capable HT and need to be aware of any dangers and emergencies that might be related to your current position. __Please use this option responsibly and only when necessary__. This program option is __not__ supposed to be used on a permanent basis. Remember: with great power comes great responsibility. This program option has no default setting, meaning that unless you specify a call sign, only the static coordinates from the program's config file will be monitored.
- ``warning-level``. Defines the minimal warning level that a message must have before the program considers it for processing. Currently, MOWAS supports four warning levels (listed in ascending order of importance): ``MINOR`` (default setting), ``MODERATE``, ``SEVERE`` and ``EXTREME``. If your message's warning level is below the given value for the ``warning-level`` parameter, it will be ignored - even if its coordinates match with your watch coordinates. 
- ``dapnet-high-prio-level``. Similar to the ``warning-level`` parameter, you can specify a MOWAS warning threshold for MOWAS messages of the "Alert" and "Update" categories. If the MOWAS messages' warning level is greater or equal to ``dapnet-high-pro-level``, then the outgoing DAPNET message will be sent to the user with high priority. In any other case, normal priority settings will be applied. Note that MOWAS "Cancel" messages will always be sent with standard priority. Default value for this option is ``SEVERE``.
- ``enable-covid-content``. By default, ``mowas-pwb`` __suppresses__ Covid related alerts. Due to the sheer number of Covid related messages issued by the German government on a daily basis, I've added this constraint which simply omits all messages containing the terms ``covid`` or ``corona``. If you still want to receive these messages, you can set this program flag.
- ``translate-to`` allows users to auto-translate the MOWAS messages. This option uses www.deepl.com and requires that you configure a deepl.com API access key in the program's configuration file. Have a look at the [supported languages](https://support.deepl.com/hc/en-us/articles/360019925219-Languages-included-in-DeepL-Pro). The language code needs to be provided in ISO-639-1 format.
  - Valid language codes: ``bg``,``cs``,``da``,``el``,``en-gb``,``en-us``,``es``,``et``,``fi``,``fr``,``hu``,``it``,``ja``,``lt``,``lv``,``nl``,``pl``,``pt-br``,``pt-pt``,``ro``,``ru``,``sk``,``sl``,``sv``,``zh``
  - As DAPNET messages do not support unicode, the only valid language codes for _translated_ DAPnet messages are ``en-us`` and ``en-gb``

If you have specified the ``follow-the-ham`` parameter AND aprs.fi's access key is configured,``mowas-pwb`` will initiate one request to aprs.fi during its startup process. This pre-check allows it to detect if the call sign does exist on aprs.fi and if the aprs.fi API access key is configured in a proper way. If that check is not passed successfully, the program startup will abort. Any _further_ errors in retrieving that call sign's position data during its processing cycles will _not_ cause a program error, though. ``mowas-pwb`` will simply continue to monitor the static watch areas which were specified in the program config file; the call sign's availability on aprs.fi simply might have expired.

## Mandatory command line parameters

- ``dapnet-destination-callsign`` Specifies the HAM radio operator's DAPNET call sign of the person that will receive our program's message(s). Additional SSID information can be specified but will not be honored by the program (DAPNET call signs have no SSIDs). This value has to be specified if the program is instructed to send data to DAPNET.
- ``telegram-destination-id`` This is the __numeric__ Telegram user ID of the person that will receive our program's message(s). You can use the Telegram bot ``userinfobot`` in order to figure out what your numeric Telegram user ID is. 
- ``email-recipient`` Specifies the email address of the person that will receive our program's message(s). This value has to be specified if the program is instructed to send data to an email account.

At least __one__ of these three output options (DAPNET _or_ Telegram _or_ Email) needs to be configured in the program's config file __and__ also provided via command line parameters - otherwise, the program will exit with an error message during startup. Keep in mind that you can disable notification options without the need for modifying the program configuration file.

Have a look at the [program's processing logic and known issues](ADDITIONAL_INFO.md)
